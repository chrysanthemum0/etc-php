<?php

// 소멸자 (__destruct)
// 소멸자는 객체의 생명 주기가 끝날 때 호출되는 메소드. 
// 객체가 소멸되거나 명시적으로 unset 함수로 제거될 때 소멸자가 호출. 
// 소멸자는 객체가 소멸되기 전에 필요한 정리 작업을 수행하는데 사용.

// 소멸자 역할
// 리소스 해제: 데이터베이스 연결 종료, 파일 닫기 등 리소스를 해제하는 작업을 수행.
// 정리 작업: 객체 소멸 전에 로그 기록, 메시지 출력 등의 정리 작업을 수행.

// 전체 실행 순서
// Car 클래스의 생성자 호출: 객체 생성
// 생성자 내 메시지 출력:
// <p>자동차 생성</p>
// <p>이름 : 렉서스</p>
// <p>색상 : 흰색</p>
// 객체 소멸 (unset 호출): 객체 소멸
// 소멸자 내 메시지 출력:
// <p>자동차 폐차</p>
// <p>차량말소 등록증이 발급되었습니다.</p>
// 프로그램 실행 중 메시지 출력:
// <p>프로그램 실행중</p>
// 위와 같은 순서로 코드가 실행. 소멸자는 객체가 소멸될 때 자동으로 호출되며, 필요한 정리 작업을 수행. 
// unset 함수를 사용하여 객체를 명시적으로 소멸할 수 있고, 이 경우 즉시 소멸자가 호출.

// Car 클래스 정의
class Car {
    // 클래스 속성 정의
    public $name;
    public $color;

    // 생성자 메소드
    function __construct($name, $color) {
        $this->name = $name;
        $this->color = $color;

        // 생성자 호출 시 메시지 출력
        echo "<p>자동차 생성</p>";
        echo "<p>이름 : $this->name</p>";
        echo "<p>색상 : $this->color</p>";
    }

    // 소멸자 메소드
    function __destruct() {
        // 객체 소멸 시 메시지 출력
        echo "<p>자동차 폐차</p>";
        echo "<p>차량말소 등록증이 발급되었습니다.</p>";
    }
}

// Car 클래스의 새로운 인스턴스 생성
$lexus = new Car("렉서스", "흰색");

// 인스턴스를 명시적으로 소멸
unset($lexus);

echo "<p>프로그램 실행중</p>";
